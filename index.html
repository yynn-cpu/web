<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¤§ç¬¨æ¡¶å®ç›˜æ‰«æå·¥ä½œç«™</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f6f8fa; padding: 20px; }
        .card { background: white; border: 1px solid #d0d7de; border-radius: 6px; padding: 20px; max-width: 900px; margin: auto; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        h2 { border-bottom: 1px solid #eaecef; padding-bottom: 10px; font-size: 18px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; background: #f6f8fa; padding: 10px; color: #57606a; font-size: 13px; }
        td { padding: 12px; border-bottom: 1px solid #eaecef; font-size: 14px; }
        .up { color: #22a639; font-weight: bold; }
        .loading { color: #0969da; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ“¡ å®æ—¶åˆçº¦å¼ºåŠ¿å¸æ‰«æ <span id="status" class="loading">æ­£åœ¨è¿æ¥ä¸­è½¬ç«™...</span></h2>
        <table id="targetTable">
            <thead>
                <tr><th>å¸ç§</th><th>ä»·æ ¼</th><th>24hæ¶¨å¹…</th><th>æ“ä½œå»ºè®®</th></tr>
            </thead>
            <tbody id="content">
                <tr><td colspan="4">ç­‰å¾…åˆå§‹åŒ–...</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        // ã€æ³¨æ„ã€‘è¯·æŠŠä¸‹é¢è¿™ä¸€è¡Œæ¢æˆä½ åˆšæ‰ç”Ÿæˆçš„ Worker åœ°å€ï¼
        const PROXY_URL = "https://bitter-dream-fe9c.2xiaxiaxia.workers.dev";

        async function scan() {
            const status = document.getElementById('status');
            const content = document.getElementById('content');
            
            try {
                status.innerText = "ğŸ” æ­£åœ¨æ‰«æå…¨åœºè¡Œæƒ…...";
                // é€šè¿‡ä¸­è½¬ç«™è·å–æ‰€æœ‰åˆçº¦çš„ 24h ä»·æ ¼å˜åŠ¨
                const res = await fetch(`${PROXY_URL}/fapi/v1/ticker/24hr`);
                const data = await res.json();
                
                // ç­–ç•¥ï¼šç­›é€‰æ¶¨å¹… >= 5% ä¸”æ˜¯ USDT ç»“ç®—çš„åˆçº¦
                const signals = data.filter(item => 
                    parseFloat(item.priceChangePercent) >= 5 && item.symbol.endsWith("USDT")
                ).sort((a, b) => b.priceChangePercent - a.priceChangePercent);
                
                status.innerText = `âœ… æ‰«æå®Œæˆ | å‘ç° ${signals.length} ä¸ªå¼ºä¿¡å· | æ›´æ–°æ—¶é—´: ${new Date().toLocaleTimeString()}`;
                
                if(signals.length === 0) {
                    content.innerHTML = '<tr><td colspan="4" style="text-align:center; padding:30px;">å½“å‰è¡Œæƒ…å¹³æ·¡ï¼Œæš‚æ— å¼ºåŠ›ä¿¡å·</td></tr>';
                    return;
                }

                content.innerHTML = signals.map(s => `
                    <tr>
                        <td><b>${s.symbol}</b></td>
                        <td>${parseFloat(s.lastPrice)}</td>
                        <td class="up">+${s.priceChangePercent}%</td>
                        <td>å»ºè®®å…³æ³¨å›è°ƒä¹°å…¥</td>
                    </tr>
                `).join('');

            } catch (e) {
                status.innerText = "âŒ ä¸­è½¬ç«™è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Worker åœ°å€";
                console.error(e);
            }
        }

        // ç«‹å³æ‰§è¡Œä¸€æ¬¡
        scan();
        // æ¯ 60 ç§’è‡ªåŠ¨åˆ·ä¸€æ¬¡
        setInterval(scan, 60000);
    </script>
</body>
</html>